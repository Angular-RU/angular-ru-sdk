import{a as A}from"./chunk-M3YDALHO.js";import{b as _,g as M,j as $}from"./chunk-7Z7V7ZMV.js";import{h as b,r as T,s as F,t as v,w as R}from"./chunk-PHCOQDDI.js";import{Aa as D,Db as p,Eb as m,K as I,M as C,Va as c,Y as L,Zb as l,_b as S,aa as d,cc as y,dc as g,fa as o,fb as j,n as s,u as x,xb as u,yb as h}from"./chunk-IDE3SQBV.js";var k=(()=>{let t=class t{constructor(){this.httpService=o(A),this.SIMULATE_REQUEST_DELAY=2e3}loadUser(){return this.httpService.get("/assets/user.json").pipe(I(this.SIMULATE_REQUEST_DELAY),x(n=>n.data))}};t.\u0275fac=function(a){return new(a||t)},t.\u0275prov=d({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var i,r=(i=class extends ${constructor(){super(...arguments),this.userService=o(k)}static getEntity(t){return t.entity}static isLoading(t){return t.loading}loadUser(){return this.ctx.patchState({loading:!0}),this.userService.loadUser().pipe(C(()=>this.patchState({loading:!1})),L(t=>this.patchState({entity:t})))}},i.\u0275fac=(()=>{let t;return function(n){return(t||(t=D(i)))(n||i)}})(),i.\u0275prov=d({token:i,factory:i.\u0275fac}),i);s([_({subscribeRequired:!1})],r.prototype,"loadUser",null);s([v()],r,"getEntity",null);s([v()],r,"isLoading",null);r=s([M(),F({name:"user",defaults:{entity:{name:null,email:null},loading:!1}})],r);function N(e,t){if(e&1&&(p(0,"div")(1,"h4"),l(2),m(),p(3,"p"),l(4),m()()),e&2){let f=t;c(2),S(f.name),c(2),S(f.email)}}function Q(e,t){e&1&&(p(0,"div"),l(1,"LOADING..."),m())}var w=(()=>{let t=class t{constructor(){this.userState=o(r),this.store=o(T),this.user$=this.store.select(r.getEntity),this.isLoading$=this.store.select(r.isLoading),this.userState.loadUser()}};t.\u0275fac=function(a){return new(a||t)},t.\u0275cmp=j({type:t,selectors:[["user"]],decls:6,vars:6,template:function(a,U){if(a&1&&(p(0,"h3"),l(1,"User state"),m(),u(2,N,5,2,"div"),y(3,"async"),u(4,Q,2,0,"div"),y(5,"async")),a&2){let E;c(2),h((E=g(3,2,U.user$))?2:-1,E),c(2),h(g(5,4,U.isLoading$)===!0?4:-1)}},dependencies:[b],encapsulation:2,changeDetection:0});let e=t;return e})();var Y=[{path:"",component:w,providers:[R([r])]}],dt=Y;export{dt as default};
