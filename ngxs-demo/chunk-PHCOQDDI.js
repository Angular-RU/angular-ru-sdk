import{A as on,B as sn,D as Ie,F as dt,Ga as yn,I as ft,J as pt,L as an,M as un,N as cn,T as U,U as ln,V as dn,X as fn,Y as pn,Z,_ as ht,_a as mt,a as d,aa as f,ab as Sn,b as A,da as h,e as ut,ea as C,fa as a,g as oe,ga as I,ha as Te,hb as En,hc as q,ib as Dt,ic as xe,j as G,k as ie,ka as hn,l as ct,m as lt,oa as R,ob as j,oc as J,p as rn,pa as W,pc as yt,q as k,qa as _,ra as gn,rb as ce,s as se,sa as mn,sb as An,tb as wn,u as N,ub as Cn,va as gt,vb as _n,w as ae,z as ue,za as Dn}from"./chunk-IDE3SQBV.js";function vn(e,n){let r=!n?.manualCleanup?n?.injector?.get(_)??a(_):null,o=yr(n?.equal),i;n?.requireSync?i=gt({kind:0},{equal:o}):i=gt({kind:1,value:n?.initialValue},{equal:o});let s,u=e.subscribe({next:c=>i.set({kind:1,value:c}),error:c=>{i.set({kind:2,error:c}),s?.()},complete:()=>{s?.()}});if(n?.requireSync&&i().kind===0)throw new Z(601,!1);return s=r?.onDestroy(u.unsubscribe.bind(u)),xe(()=>{let c=i();switch(c.kind){case 1:return c.value;case 2:throw c.error;case 0:throw new Z(601,!1)}},{equal:n?.equal})}function yr(e=Object.is){return(n,t)=>n.kind===1&&t.kind===1&&e(n.value,t.value)}var T="NGXS_META",wt="NGXS_OPTIONS_META",St="NGXS_SELECTOR_META",Sr=Object.prototype.hasOwnProperty,Me=(e,n)=>Sr.call(e,n),bn=Object.defineProperty;function Fn(e){if(!Me(e,T)){let n={name:null,actions:{},defaults:{},path:null,makeRootSelector(t){return t.getStateGetter(n.name)},children:[]};bn(e,T,{value:n})}return le(e)}function le(e){return e[T]}function Ct(e){return Me(e,St)||bn(e,St,{value:{makeRootSelector:null,originalFn:null,containerClass:null,selectorName:null,getSelectorOptions:()=>({})}}),_t(e)}function _t(e){return e[St]}function Er(e,n,t){if(n===null||t===null||n.length!==t.length)return!1;let r=n.length;for(let o=0;o<r;o++)if(!e(n[o],t[o]))return!1;return!0}function Ne(e,n=Object.is){let t=null,r=null;function o(){return Er(n,t,arguments)||(r=e.apply(null,arguments)),t=arguments,r}return o.reset=function(){t=null,r=null},o}var Et=class{_name;constructor(n){this._name=n;let t=Ct(this);t.makeRootSelector=r=>r.getStateGetter(this._name)}getName(){return this._name}toString(){return`StateToken[${this._name}]`}},Ar=(()=>{class e{static _value={};static set(t){this._value=t}static pop(){let t=this._value;return this._value={},t}}return e})(),vt=new h("",{providedIn:"root",factory:()=>Ar.pop()}),bt=(()=>{class e extends ie{constructor(){super(!1),a(_).onDestroy(()=>this.complete())}bootstrap(){this.next(!0)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=f({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Re=new h(""),Pe=new h("");function In(e){let n=[],t=!1;return function(...o){if(t){n.unshift(o);return}for(t=!0,e(...o);n.length>0;){let i=n.pop();i&&e(...i)}t=!1}}var Oe=class extends G{_orderedNext=In(n=>super.next(n));next(n){this._orderedNext(n)}},At=class extends ie{_orderedNext=In(n=>super.next(n));_currentValue;constructor(n){super(n),this._currentValue=n}getValue(){return this._currentValue}next(n){this._currentValue=n,this._orderedNext(n)}};function Ft(e){return n=>new oe(t=>n.subscribe({next(r){e(()=>t.next(r))},error(r){e(()=>t.error(r))},complete(){e(()=>t.complete())}}))}var Le=(()=>{class e extends At{state=vn(this.pipe(Ft(q)),{manualCleanup:!0,requireSync:!0});constructor(){super({}),a(_).onDestroy(()=>this.complete())}static \u0275fac=function(r){return new(r||e)};static \u0275prov=f({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Tn=(()=>{class e{_actionTypeToHandlersMap=new Map;constructor(){a(_).onDestroy(()=>this._actionTypeToHandlersMap.clear())}get(t){return this._actionTypeToHandlersMap.get(t)}register(t,r){let o=this._actionTypeToHandlersMap.get(t)??new Set;return o.add(r),this._actionTypeToHandlersMap.set(t,o),()=>{this._actionTypeToHandlersMap.get(t).delete(r)}}static \u0275fac=function(r){return new(r||e)};static \u0275prov=f({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var de=(()=>{class e{static type="@@INIT"}return e})(),fe=(()=>{class e{addedStates;static type="@@UPDATE_STATE";constructor(t){this.addedStates=t}}return e})(),pe=new h("");function xn(e){return!!e.prototype.handle}function z(e){return e.constructor?.type||e.type}function It(e){let n=z(e);return function(t){return n===z(t)}}var H=(e,n,t)=>{e=d({},e);let r=n.split("."),o=r.length-1;return r.reduce((i,s,u)=>(u===o?i[s]=t:i[s]=Array.isArray(i[s])?i[s].slice():d({},i[s]),i?.[s]),e),e},x=(e,n)=>n.split(".").reduce((t,r)=>t?.[r],e);var Ii=Array.isArray,wr=e=>typeof e=="function",On=wr;var xt=(()=>{class e{plugins=[];_parentManager=a(e,{optional:!0,skipSelf:!0});_pluginHandlers=a(pe,{optional:!0});constructor(){this.registerHandlers()}get _rootPlugins(){return this._parentManager?.plugins||this.plugins}registerHandlers(){let t=this.getPluginHandlers();this._rootPlugins.push(...t)}getPluginHandlers(){return(this._pluginHandlers||[]).map(r=>r.handle?r.handle.bind(r):r)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=f({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Be(e){return Ft(n=>e.leave(n))}var Ot=new WeakMap,Mn=!1;function vr(){if(Mn)return;let e=ut.onUnhandledError;ut.onUnhandledError=function(n){let t=Ot.get(n);if(t)t();else if(e)e.call(this,n);else throw n},Mn=!0}function br(e){let n=Ot.get(e);return n?(n(),!0):!1}function Fr(e,n){if(e&&typeof e=="object"){let t=!1;Ot.set(e,()=>{t||(t=!0,n())})}return e}function Ir(e){return n=>{let t=n.subscribe({error:r=>{e.runOutsideAngular(()=>{queueMicrotask(()=>{t&&br(r)})})}});return new oe(r=>(t?.unsubscribe(),t=null,n.subscribe(r)))}}var jn=(()=>{class e extends G{constructor(){super(),a(_).onDestroy(()=>this.complete())}static \u0275fac=function(r){return new(r||e)};static \u0275prov=f({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Mt=(()=>{class e{_ngZone=a(j);enter(t){return this._runOutsideAngular(t)}leave(t){return this._runInsideAngular(t)}_runInsideAngular(t){return j.isInAngularZone()?t():this._ngZone.run(t)}_runOutsideAngular(t){return j.isInAngularZone()?this._ngZone.runOutsideAngular(t):t()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=f({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),v=function(e){return e.Dispatched="DISPATCHED",e.Successful="SUCCESSFUL",e.Canceled="CANCELED",e.Errored="ERRORED",e}(v||{}),Nt=(()=>{class e extends Oe{dispatched$=new G;constructor(){super(),this.subscribe(r=>{r.status===v.Dispatched&&this.dispatched$.next(r)}),a(_).onDestroy(()=>{this.complete(),this.dispatched$.complete()})}static \u0275fac=function(r){return new(r||e)};static \u0275prov=f({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Tr=(()=>{class e{_ngZone=a(j);_actions=a(Nt);_actionResults=a(jn);_pluginManager=a(xt);_stateStream=a(Le);_ngxsExecutionStrategy=a(Mt);_injector=a(R);dispatch(t){return this._ngxsExecutionStrategy.enter(()=>this.dispatchByEvents(t)).pipe(Ir(this._ngZone),Be(this._ngxsExecutionStrategy))}dispatchByEvents(t){return Array.isArray(t)?t.length===0?k(void 0):ue(t.map(r=>this.dispatchSingle(r))).pipe(N(()=>{})):this.dispatchSingle(t)}dispatchSingle(t){let r=this._stateStream.getValue(),o=this._pluginManager.plugins;return $n(this._injector,[...o,(i,s)=>{i!==r&&this._stateStream.next(i);let u=this.getActionResultStream(s);return u.subscribe(c=>this._actions.next(c)),this._actions.next({action:s,status:v.Dispatched}),this.createDispatchObservable(u)}])(r,t).pipe(U())}getActionResultStream(t){return this._actionResults.pipe(Ie(r=>r.action===t&&r.status!==v.Dispatched),pt(1),U())}createDispatchObservable(t){return t.pipe(ae(r=>{switch(r.status){case v.Successful:return k(this._stateStream.getValue());case v.Errored:throw r.error;default:return lt}}),U())}static \u0275fac=function(r){return new(r||e)};static \u0275prov=f({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),$n=(e,n)=>(...t)=>{let r=n.shift();return hn(e,()=>r(...t,(...o)=>$n(e,n)(...o)))},Gn=new h(""),Un=new h(""),Vn=new h(""),he=(()=>{class e{developmentMode;compatibility={strictContentSecurityPolicy:!1};selectorOptions={injectContainerState:!1,suppressErrors:!1};static \u0275fac=function(r){return new(r||e)};static \u0275prov=f({token:e,factory:()=>(()=>{let t=new e,r=a(Vn);return A(d(d({},t),r),{selectorOptions:d(d({},t.selectorOptions),r.selectorOptions)})})(),providedIn:"root"})}return e})(),Tt=class{previousValue;currentValue;firstChange;constructor(n,t,r){this.previousValue=n,this.currentValue=t,this.firstChange=r}};var ge=(()=>{class e{_stateStream=a(Le);_dispatcher=a(Tr);_config=a(he);getRootStateOperations(){return{getState:()=>this._stateStream.getValue(),setState:r=>this._stateStream.next(r),dispatch:r=>this._dispatcher.dispatch(r)}}setStateToTheCurrentWithNew(t){let r=this.getRootStateOperations(),o=r.getState();r.setState(d(d({},o),t.defaults))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=f({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function xr(e,n,t){return r=>{let{argumentSelectorFunctions:o,selectorOptions:i}=Mr(r,e,n),{suppressErrors:s}=i;return function(c){let p=o.map(S=>S(c));try{return t(...p)}catch(S){if(s&&S instanceof TypeError)return;throw S}}}}function Or(e,n){let t=n?.containerClass,o=Ne(function(){let s=e.apply(t,arguments);return typeof s=="function"?Ne.apply(null,[s]):s});return Object.setPrototypeOf(o,e),o}function Mr(e,n,t=[]){let r=n.getSelectorOptions(),o=e.getSelectorOptions(r),s=Nr(t,o,n.containerClass).map(u=>zn(u)(e));return{selectorOptions:o,argumentSelectorFunctions:s}}function Nr(e=[],n,t){let r=[],o=n.injectContainerState||e.length===0;return t&&o&&le(t)&&r.push(t),r.push(...e),r}function zn(e){return(_t(e)||le(e))?.makeRootSelector||(()=>e)}function Rr(e){return n=>{for(let t=0;t<e.length;t++){if(!n)return;n=n[e[t]]}return n}}function Pr(e){let n=e,t="store."+n[0],r=0,o=n.length,i=t;for(;++r<o;)i=i+" && "+(t=t+"."+n[r]);return new Function("store","return "+i+";")}var Lr=new h("",{providedIn:"root",factory:()=>a(he).compatibility?.strictContentSecurityPolicy?Rr:Pr});function Br(e){let n=t=>e.find(o=>o===t)[T].name;return e.reduce((t,r)=>{let o=r[T];return t[o.name]=(o.children||[]).map(n),t},{})}function kr(e){return e.reduce((n,t)=>{let r=t[T];return n[r.name]=t,n},{})}function jr(e,n={}){let t=(r,o)=>{for(let i in r)if(r[i]?.includes(o)){let s=t(r,i);return s?`${s}.${i}`:i}return null};for(let r in e){let o=t(e,r);n[r]=o?`${o}.${r}`:r}return n}function $r(e){let n=[],t={},r=(o,i=[])=>{t[o]=!0,i.push(o);for(let s of e[o])t[s]||r(s,i.slice());n.includes(o)||n.push(o)};for(let o in e)r(o);return n.reverse()}var Gr=(()=>{class e{_ngZone=a(j);_errorHandler=a(gn);handleError(t,r){this._ngZone.runOutsideAngular(()=>this._errorHandler.handleError(t))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=f({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Ur(...e){return Vr(e,[v.Dispatched])}function Vr(e,n,t=Hr){let r=Xr(e),o=n&&Yr(n);return function(i){return i.pipe(zr(r,o),t())}}function zr(e,n){return Ie(t=>{let r=z(t.action),o=e[r],i=n?n[t.status]:!0;return o&&i})}function Hr(){return N(e=>e.action)}function Xr(e){return e.reduce((n,t)=>(n[z(t)]=!0,n),{})}function Yr(e){return e.reduce((n,t)=>(n[t]=!0,n),{})}function Kr(e){return n=>{let t=d({},n);for(let r in e)t[r]=e[r];return t}}var Rt=(()=>{class e{_internalStateOperations=a(ge);createStateContext(t){let r=this._internalStateOperations.getRootStateOperations();return{getState(){let o=r.getState();return Xn(o,t)},patchState(o){let i=r.getState(),s=Kr(o);Nn(r,i,s,t)},setState(o){let i=r.getState();On(o)?Nn(r,i,o,t):Hn(r,i,o,t)},dispatch(o){return r.dispatch(o)}}}static \u0275fac=function(r){return new(r||e)};static \u0275prov=f({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Hn(e,n,t,r){let o=H(n,r,t);return e.setState(o),o}function Nn(e,n,t,r){let o=Xn(n,r),i=t(o);return Hn(e,n,i,r)}function Xn(e,n){return x(e,n)}var Zr=(()=>{class e{_actions=a(Nt);_stateContextFactory=a(Rt);createActionHandler(t,r,o){let{dispatched$:i}=this._actions;return s=>{let u=this._stateContextFactory.createStateContext(t),c=r(u,s);if(ce(c)&&(c=rn(c)),se(c)){if(c=c.pipe(ae(p=>ce(p)||se(p)?p:k(p)),ft(void 0)),o.cancelUncompleted){let p=i.pipe(Ur(s));c=c.pipe(fn(p))}c=c.pipe(un(()=>{if(0)var p;else u.setState=Rn,u.patchState=Rn}))}else c=k(void 0);return c}}static \u0275fac=function(r){return new(r||e)};static \u0275prov=f({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Rn(){}function Wr(e){let n=e===void 0?{}:e;return e&&(Array.isArray(e)?n=e.slice():typeof e=="object"&&(n=d({},e))),n}var ke=(()=>{class e{_injector=a(R);_config=a(he);_actionHandlerFactory=a(Zr);_actions=a(Nt);_actionResults=a(jn);_initialState=a(vt,{optional:!0});_actionRegistry=a(Tn);_propGetter=a(Lr);_actionsSubscription=null;_ngxsUnhandledErrorHandler=null;_states=[];_statesByName={};_statePaths={};getRuntimeSelectorContext=Ne(()=>{let t=this,r=t._propGetter;function o(s){let u=t._statePaths[s];return u?r(u.split(".")):null}return{getStateGetter(s){let u=o(s);return u||((...c)=>(u||(u=o(s)),u?u(...c):void 0))},getSelectorOptions(s){let u=t._config.selectorOptions;return d(d({},u),s||{})}}});constructor(){a(_).onDestroy(()=>this._actionsSubscription?.unsubscribe())}add(t){let{newStates:r}=this.addToStatesMap(t);if(!r.length)return[];let o=Br(r),i=$r(o),s=jr(o),u=kr(r),c=[];for(let p of i){let S=u[p],Fe=s[p],st=S[T];this.addRuntimeInfoToMeta(st,Fe);let at={name:p,path:Fe,isInitialised:!1,actions:st.actions,instance:a(S),defaults:Wr(st.defaults)};this.hasBeenMountedAndBootstrapped(p,Fe)||c.push(at),this._states.push(at),this.hydrateActionMetasMap(at)}return c}addAndReturnDefaults(t){let r=t||[],o=this.add(r);return{defaults:o.reduce((s,u)=>H(s,u.path,u.defaults),{}),states:o}}connectActionHandlers(){this._actionsSubscription=this._actions.pipe(Ie(t=>t.status===v.Dispatched),ae(t=>{let r=t.action;return this.invokeActions(r).pipe(N(()=>({action:r,status:v.Successful})),ft({action:r,status:v.Canceled}),dt(o=>{let i=this._ngxsUnhandledErrorHandler||=this._injector.get(Gr),s=Fr(o,()=>i.handleError(o,{action:r}));return k({action:r,status:v.Errored,error:s})}))})).subscribe(t=>this._actionResults.next(t))}invokeActions(t){let r=z(t),o=[],i=!1,s=this._actionRegistry.get(r);if(s)for(let u of s){let c;try{c=u(t)}catch(p){c=new oe(S=>S.error(p))}o.push(c),i=!0}return o.length||o.push(k(void 0)),ue(o)}addToStatesMap(t){let r=[],o=this._statesByName;for(let i of t){let s=le(i).name;!o[s]&&(r.push(i),o[s]=i)}return{newStates:r}}addRuntimeInfoToMeta(t,r){this._statePaths[t.name]=r,t.path=r}hasBeenMountedAndBootstrapped(t,r){let o=x(this._initialState,r)!==void 0;return this._statesByName[t]&&o}hydrateActionMetasMap({path:t,actions:r,instance:o}){for(let i of Object.keys(r)){let s=r[i].map(u=>{let c=(p,S)=>o[u.fn](p,S);return this._actionHandlerFactory.createActionHandler(t,c,u.options)});for(let u of s)this._actionRegistry.register(i,u)}}static \u0275fac=function(r){return new(r||e)};static \u0275prov=f({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),O=(()=>{class e{_stateStream=a(Le);_internalStateOperations=a(ge);_config=a(he);_internalExecutionStrategy=a(Mt);_stateFactory=a(ke);_selectableStateStream=this._stateStream.pipe(Be(this._internalExecutionStrategy),U({bufferSize:1,refCount:!0}));constructor(){this.initStateStream()}dispatch(t){return this._internalStateOperations.getRootStateOperations().dispatch(t)}select(t){let r=this.getStoreBoundSelectorFn(t);return this._selectableStateStream.pipe(N(r),dt(o=>{if(this._config.selectorOptions.suppressErrors&&o instanceof TypeError)return k(void 0);throw o}),an(),Be(this._internalExecutionStrategy))}selectOnce(t){return this.select(t).pipe(pt(1))}selectSnapshot(t){return this.getStoreBoundSelectorFn(t)(this._stateStream.getValue())}selectSignal(t){let r=this.getStoreBoundSelectorFn(t);return xe(()=>r(this._stateStream.state()))}subscribe(t){return this._selectableStateStream.pipe(Be(this._internalExecutionStrategy)).subscribe(t)}snapshot(){return this._internalStateOperations.getRootStateOperations().getState()}reset(t){this._internalStateOperations.getRootStateOperations().setState(t)}getStoreBoundSelectorFn(t){let r=zn(t),o=this._stateFactory.getRuntimeSelectorContext();return r(o)}initStateStream(){let t=a(vt),r=this._stateStream.value;(!r||Object.keys(r).length===0)&&this._stateStream.next(t)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=f({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),qr=new h("");var Jr=(()=>{class e{static store=null;static config=null;constructor(t,r){e.store=t,e.config=r,a(_).onDestroy(()=>{e.store=null,e.config=null})}static \u0275fac=function(r){return new(r||e)(C(O),C(he))};static \u0275prov=f({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Yn=(()=>{class e{_store=a(O);_internalStateOperations=a(ge);_stateContextFactory=a(Rt);_appBootstrappedState=a(bt);_initStateHasBeenDispatched;ngxsBootstrap(t,r){this._internalStateOperations.getRootStateOperations().dispatch(t).pipe(ae(()=>r?(this._invokeInitOnStates(r.states),this._appBootstrappedState):lt)).subscribe(o=>{o&&this._invokeBootstrapOnStates(r.states)})}_invokeInitOnStates(t){for(let r of t){let o=r.instance;if(o.ngxsOnChanges){let i;this._store.select(s=>x(s,r.path)).pipe(dn(void 0),ln(1)).subscribe(s=>{let u=new Tt(i,s,!r.isInitialised);i=s,o.ngxsOnChanges(u)})}o.ngxsOnInit&&o.ngxsOnInit(this._getStateContext(r)),r.isInitialised=!0}}_invokeBootstrapOnStates(t){for(let r of t){let o=r.instance;o.ngxsAfterBootstrap&&o.ngxsAfterBootstrap(this._getStateContext(r))}}_getStateContext(t){return this._stateContextFactory.createStateContext(t.path)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=f({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Qr(){vr(),(a(qr,{optional:!0})||[]).forEach(s=>s());let n=a(ke),t=a(ge);a(O),a(Jr);let r=a(Gn,{optional:!0})||[],o=a(Yn),i=n.addAndReturnDefaults(r);t.setStateToTheCurrentWithNew(i),n.connectActionHandlers(),o.ngxsBootstrap(new de,i)}function eo(){a(O);let e=a(ge),n=a(ke),t=a(Un,{optional:!0})||[],r=a(Yn),o=t.reduce((s,u)=>s.concat(u),[]),i=n.addAndReturnDefaults(o);i.states.length&&(e.setStateToTheCurrentWithNew(i),r.ngxsBootstrap(new fe(i.defaults),i))}var Pn=new h(""),Ln=new h(""),to=[{provide:Pn,useFactory:Qr},Te(()=>a(Pn))],no=[{provide:Ln,useFactory:eo},Te(()=>a(Ln))];function ro(e,n){return[...e,{provide:Gn,useValue:e},{provide:Cn,useFactory:()=>{let t=a(bt);return()=>t.bootstrap()},multi:!0},{provide:Vn,useValue:n}]}function oo(e){return[xt,...e,{provide:Un,multi:!0,useValue:e}]}function Vi(e){return n=>{let t=n,r=Object.getPrototypeOf(t),o=Fn(t),i=d(d({},r[wt]||{}),e);io(o,r,i),t[wt]=i}}function io(e,n,t){let{name:r,defaults:o,children:i}=t,s=typeof r=="string"?r:r?.getName?.()||null;if(Me(n,T)){let u=n[T]||{};e.actions=d(d({},e.actions),u.actions)}e.name=s,e.defaults=o,e.children=i}var Bn="NGXS_SELECTOR_OPTIONS_META",kn={getOptions:e=>e?.[Bn]||{},defineOptions:(e,n)=>{e&&(e[Bn]=n)}};function so(e,n){let t=Ct(e);t.originalFn=e;let r=()=>({});n&&(t.containerClass=n.containerClass,t.selectorName=n.selectorName||null,r=n.getSelectorOptions||r);let o=d({},t);return t.getSelectorOptions=()=>ao(o,r()),t}function ao(e,n){return d(d(d(d({},kn.getOptions(e.containerClass)||{}),kn.getOptions(e.originalFn)||{}),e.getSelectorOptions()||{}),n)}function uo(e,n,t){let r=Or(n,t),o=so(n,t);return o.makeRootSelector=xr(o,e,r),r}function zi(e){return(n,t,r)=>{r||=Object.getOwnPropertyDescriptor(n,t);let o=r?.value,i=uo(e,o,{containerClass:n,selectorName:t.toString(),getSelectorOptions(){return{}}});return{configurable:!0,get(){return i},originalFn:o}}}var co=(()=>{class e{enter(t){return t()}leave(t){return t()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=f({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Hi(){return I([{provide:Mt,useExisting:co}])}function Xi(e=[],...n){let t=[],r={};return n.length>0&&(lo(n[0])?t.push(...n):(r=n[0],t.push(...n.slice(1)))),I([...ro(e,r),to,t])}function lo(e){return!!e.\u0275providers}function Yi(e,...n){return I([...oo(e),n,no])}function Kn(e){return I([xn(e)?{provide:pe,useClass:e,multi:!0}:{provide:pe,useValue:e,multi:!0},Te(()=>a(xt))])}var Ki=new h("",{providedIn:"root",factory:()=>{let e=new Set;return a(_n).onDestroy(()=>e.clear()),e}});function Zn(){return I([{provide:Pe,useExisting:Rt},{provide:Re,useExisting:ke}])}var Jn=null;function je(){return Jn}function fo(e){Jn??=e}var Pt=class{},me=(()=>{class e{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||e)};static \u0275prov=f({token:e,factory:()=>a(Qn),providedIn:"platform"})}return e})();var Qn=(()=>{class e extends me{_location;_history;_doc=a(W);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return je().getBaseHref(this._doc)}onPopState(t){let r=je().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=je().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,o){this._history.pushState(t,r,o)}replaceState(t,r,o){this._history.replaceState(t,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||e)};static \u0275prov=f({token:e,factory:()=>new e,providedIn:"platform"})}return e})();function $e(e,n){return e?n?e.endsWith("/")?n.startsWith("/")?e+n.slice(1):e+n:n.startsWith("/")?e+n:`${e}/${n}`:e:n}function Wn(e){let n=e.search(/#|\?|$/);return e[n-1]==="/"?e.slice(0,n-1)+e.slice(n):e}function b(e){return e&&e[0]!=="?"?`?${e}`:e}var Q=(()=>{class e{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||e)};static \u0275prov=f({token:e,factory:()=>a(er),providedIn:"root"})}return e})(),Ge=new h(""),er=(()=>{class e extends Q{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??a(W).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return $e(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+b(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,i){let s=this.prepareExternalUrl(o+b(i));this._platformLocation.pushState(t,r,s)}replaceState(t,r,o,i){let s=this.prepareExternalUrl(o+b(i));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||e)(C(me),C(Ge,8))};static \u0275prov=f({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),tr=(()=>{class e{_subject=new G;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=go(Wn(qn(r))),this._locationStrategy.onPopState(o=>{this._subject.next({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+b(r))}normalize(t){return e.stripTrailingSlash(ho(this._basePath,qn(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._locationStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+b(r)),o)}replaceState(t,r="",o=null){this._locationStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+b(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r??void 0,complete:o??void 0})}static normalizeQueryParams=b;static joinWithSlash=$e;static stripTrailingSlash=Wn;static \u0275fac=function(r){return new(r||e)(C(Q))};static \u0275prov=f({token:e,factory:()=>po(),providedIn:"root"})}return e})();function po(){return new tr(C(Q))}function ho(e,n){if(!e||!n.startsWith(e))return n;let t=n.substring(e.length);return t===""||["/",";","?","#"].includes(t[0])?t:n}function qn(e){return e.replace(/\/index.html$/,"")}function go(e){if(new RegExp("^(https?:)?//").test(e)){let[,t]=e.split(/\/\/[^\/]+/);return t}return e}var yo=(()=>{class e extends Q{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=$e(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,i){let s=this.prepareExternalUrl(o+b(i))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,s)}replaceState(t,r,o,i){let s=this.prepareExternalUrl(o+b(i))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||e)(C(me),C(Ge,8))};static \u0275prov=f({token:e,factory:e.\u0275fac})}return e})();var So=(()=>{class e{_viewContainerRef;_viewRef=null;ngTemplateOutletContext=null;ngTemplateOutlet=null;ngTemplateOutletInjector=null;constructor(t){this._viewContainerRef=t}ngOnChanges(t){if(this._shouldRecreateView(t)){let r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let o=this._createContextForwardProxy();this._viewRef=r.createEmbeddedView(this.ngTemplateOutlet,o,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(t){return!!t.ngTemplateOutlet||!!t.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(t,r,o)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,r,o):!1,get:(t,r,o)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,r,o)}})}static \u0275fac=function(r){return new(r||e)(mt(Sn))};static \u0275dir=En({type:e,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},features:[Dn]})}return e})();function Eo(e,n){return new Z(2100,!1)}var Lt=class{createSubscription(n,t,r){return q(()=>n.subscribe({next:t,error:r}))}dispose(n){q(()=>n.unsubscribe())}},Bt=class{createSubscription(n,t,r){return n.then(o=>t?.(o),o=>r?.(o)),{unsubscribe:()=>{t=null,r=null}}}dispose(n){n.unsubscribe()}},Ao=new Bt,wo=new Lt,Co=(()=>{class e{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=a(mn);constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r),r=>this.applicationErrorHandler(r))}_selectStrategy(t){if(ce(t))return Ao;if(An(t))return wo;throw Eo(e,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||e)(mt(yt,16))};static \u0275pipe=Dt({name:"async",type:e,pure:!1})}return e})();var _o=(()=>{class e{transform(t){return JSON.stringify(t,null,2)}static \u0275fac=function(r){return new(r||e)};static \u0275pipe=Dt({name:"json",type:e,pure:!1})}return e})();function vo(e,n){n=encodeURIComponent(n);for(let t of e.split(";")){let r=t.indexOf("="),[o,i]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===n)return decodeURIComponent(i)}return null}var kt=class{};var Io="browser",To="server";function Ja(e){return e===Io}function $t(e){return e===To}var Qa=(()=>{class e{static \u0275prov=f({token:e,providedIn:"root",factory:()=>new jt(a(W),window)})}return e})(),jt=class{document;window;offset=()=>[0,0];constructor(n,t){this.document=n,this.window=t}setOffset(n){Array.isArray(n)?this.offset=()=>n:this.offset=n}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(n,t){this.window.scrollTo(A(d({},t),{left:n[0],top:n[1]}))}scrollToAnchor(n,t){let r=xo(this.document,n);r&&(this.scrollToElement(r,t),r.focus())}setHistoryScrollRestoration(n){try{this.window.history.scrollRestoration=n}catch{console.warn(ht(2400,!1))}}scrollToElement(n,t){let r=n.getBoundingClientRect(),o=r.left+this.window.pageXOffset,i=r.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(A(d({},t),{left:o-s[0],top:i-s[1]}))}};function xo(e,n){let t=e.getElementById(n)||e.getElementsByName(n)[0];if(t)return t;if(typeof e.createTreeWalker=="function"&&e.body&&typeof e.body.attachShadow=="function"){let r=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT),o=r.currentNode;for(;o;){let i=o.shadowRoot;if(i){let s=i.getElementById(n)||i.querySelector(`[name="${n}"]`);if(s)return s}o=r.nextNode()}}return null}function g(e){return e==null}function l(e){return!g(e)}function Oo(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replaceAll(/[xy]/g,e=>{let n=Math.random()*16|0;return(e==="x"?n:n&3|8).toString(16)})}function w(e){let n=typeof e=="string"?e.trim():e;return["",1/0,NaN,null,void 0].includes(n)}function Ue(e){return!w(e)}function ee(e){return e===!0}function D(e){return!!e}function P(e){return!D(e)}function Ro(e,n){if(e.hasOwnProperty("prototype"))throw new Error("Cannot support static methods with @DataAction()");if(n===void 0)throw new Error("@DataAction() can only decorate a method implementation")}function Gt(e){return g(e)?e:JSON.parse(JSON.stringify(e))}var $=e=>{let n=typeof e=="object"&&e!==null,t=e instanceof Date;if(!n||t)return e;Object.freeze(e);let o=typeof e=="function",i=Object.prototype.hasOwnProperty;for(let s of Object.getOwnPropertyNames(e))i.call(e,s)&&(!o||s!=="caller"&&s!=="callee"&&s!=="arguments")&&e[s]!==null&&(typeof e[s]=="object"||typeof e[s]=="function")&&!Object.isFrozen(e[s])&&$(e[s]);return e};function Ut(e){return Object.prototype.toString.call(e)==="[object Object]"}function X(e){return l(e)&&typeof e=="object"&&Ut(e)}function De(e,n){let t=e,r=!1;if(X(t))for(;t!==null;)if(ee(t?.hasOwnProperty(n))){r=!!Object.getOwnPropertyDescriptor(t,n)?.get;break}else t=Object.getPrototypeOf(t);return r}function Lo(e,n,t){return n?.[e]>t?.[e]?1:n?.[e]<t?.[e]?-1:0}function Bo(e,n,t){return n?.[e]>t?.[e]?-1:n?.[e]<t?.[e]?1:0}function jo(e,n){if(!De(e,n?.toString()))throw new Error(`The method must be a getter for the computed decorator to work properly.
Example: 
@Computed() get ${n.toString()}() { 
	 .. 
}`)}var ye=(()=>{let n=class n{constructor(){this.subscription=null,this.sequence$=new ie(0);let r=a(O,{optional:!0});r&&(this.subscription=r.subscribe(()=>this.updateSequence()))}get sequenceValue(){return this.sequence$.getValue()}ngOnDestroy(){this.sequence$.next(0),this.subscription?.unsubscribe()}updateSequence(){this.sequence$.next(this.sequenceValue+1)}};n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=f({token:n,factory:n.\u0275fac});let e=n;return e})();function Vt(e){return class{constructor(t){if(t)for(let r of Object.keys(t))this[r]=t[r]}static get type(){return e}}}var te="NGXS_DATA_STORAGE_EVENT_TYPE";var zt="NGXS_COMPUTED_OPTION";var Se="NGXS_DATA_META";var ne="NGXS_META";var Ee="NGXS_ARGUMENT_REGISTRY_META";function M(e){return e[Se]}var y=(()=>{let n=class n{constructor(){n.store=a(O),n.ngZone=a(j),n.factory=a(Re),n.context=a(Pe),n.computed=a(ye),n.injector=a(R)}};n.store=null,n.computed=null,n.context=null,n.factory=null,n.ngZone=null,n.injector=null,n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=f({token:n,factory:n.\u0275fac});let e=n;return e})();var E=class E{constructor(){E.statesCachedMeta.clear()}static createStateContext(n){return y.context.createStateContext(n)}static ensureMappedState(n){if(g(y.factory)||g(n))throw new Error(`Metadata was not created 
 Maybe you forgot to provide NgxsDataPlugin
 Also, you cannot use this.ctx.* until the application is fully rendered 
 (use by default ngxsOnInit(ctx: StateContext), or ngxsAfterBootstrap(ctx: StateContext) !!!`);let t=(l(n.name)?E.statesCachedMeta.get(n.name):null)||null;return t||E.ensureMeta(n)}static getRepositoryByInstance(n){let t=E.getStateClassByInstance(n),r=M(t)??null;if(g(r))throw new Error(`You forgot to add decorator @StateRepository or initialize state!
Example: provideStore([StateA]), or provideStates([StateB])`);return r}static getStateClassByInstance(n){return n?.constructor}static clearMetaByInstance(n){let t=E.getRepositoryByInstance(n);t.stateMeta.actions={},t.operations={}}static createPayload(n,t){let r={},o=Array.from(n);for(let[i,s]of o.entries()){let u=t?.getPayloadTypeByIndex(i);l(u)&&(r[u]=s)}return Object.keys(r).length>0?r:null}static createAction(n,t,r){let o=E.createPayload(t,r),i=Vt(n);return new i(o)}static ensureMeta(n){let t=l(n.name)?y.factory._states?.find(r=>r.name===n.name):null;return l(t)&&l(n.name)&&E.statesCachedMeta.set(n.name,t),t}};E.statesCachedMeta=new Map,E.\u0275fac=function(t){return new(t||E)},E.\u0275prov=f({token:E,factory:E.\u0275fac});var L=E;var Ht=class{constructor(){this.subject=new ct(1)}init(){this.subject.next()}onInit(n){this.subject.pipe(cn()).subscribe(n)}reset(){this.subject.complete(),this.subject=new ct(1)}},Xt=new Ht;function $o(e){let{statePath:n,argumentsNames:t,methodName:r,argumentRegistry:o}=e,i="";for(let s=0;s<t.length;s++)l(o?.getArgumentNameByIndex(s))?i+=o?.getArgumentNameByIndex(s):l(o?.getPayloadTypeByIndex(s))?i+=o?.getPayloadTypeByIndex(s):i+=`$arg${s}`,s!==t.length-1&&(i+=", ");return`@${n.replaceAll(".","/")}.${r}(${i})`}var Ve=class extends Error{constructor(n){super(`Child states can only be added to an object. Cannot convert ${l(n?.constructor)?n.constructor.name:n} to PlainObject`)}};function ze(e){return e.NGXS_OPTIONS_META??{name:""}}function or(e){let n=ze(e),t=n.children??[],r=n.defaults===void 0?{}:n.defaults,o=Gt(r);if(t.length>0){if(X(o))return Go(o,t);throw new Ve(o)}else return o}function Go(e,n){return n.reduce((t,r)=>{let o=ze(r);if(w(o.name))throw new Error("State name not provided in class");let i=o.name.toString();return t[i]=or(r),t},e??{})}function Uo(){if(g(y.ngZone))throw new Error(`Metadata was not created 
 Maybe you forgot to provide NgxsDataPlugin
 Also, you cannot use this.ctx.* until the application is fully rendered 
 (use by default ngxsOnInit(ctx: StateContext), or ngxsAfterBootstrap(ctx: StateContext) !!!`)}function Vo(e,n){return ue([e,n]).pipe(N(t=>t.pop()))}function He(){return`__${zt}__`}function Xe(e){return e[He()]??null}function zo(e){let n=Xe(e);return g(n)&&Object.defineProperties(e,{[He()]:{enumerable:!0,configurable:!0,value:new WeakMap}}),Xe(e)}function Ho(){return y?.computed?.sequenceValue??0}function Xo(e){let n=!1;return se(e)&&(n=!0),n}function Ye(e){return e[Ee]}var Ke=class extends Error{constructor(n,t){super(`An argument with the name '${n}' already exists in the method '${t}'`)}};var Ae=class{constructor(){this.payloadMap=new Map,this.argumentMap=new Map}getPayloadTypeByIndex(n){return this.payloadMap.get(n)??null}getArgumentNameByIndex(n){return this.argumentMap.get(n)??null}createPayloadType(n,t,r){this.checkDuplicateName(n,t),this.payloadMap.set(r,n),this.payloadMap.set(n,n)}createArgumentName(n,t,r){this.checkDuplicateName(n,t),this.argumentMap.set(r,n),this.argumentMap.set(n,n)}checkDuplicateName(n,t){if(D(this.argumentMap.has(n))||D(this.payloadMap.has(n)))throw new Ke(n,t)}};function Yo(e,n){let t=e[n],r=Ye(t);return g(r)&&Object.defineProperties(t,{[Ee]:{enumerable:!0,configurable:!0,value:new Ae}}),Ye(t)}function Yt(e){Object.defineProperty(e,Se,{writable:!0,configurable:!0,enumerable:!0,value:{stateMeta:null,operations:{},stateClass:e}})}function Kt(e){let n=M(e)??null;return(g(n)||n?.stateClass!==e)&&Yt(e),M(e)}function Ko(e,n){let t=Kt(e);t.stateMeta=n}function Zo(e){return J()?$(e):e}function Wo(e){return{enumerable:!0,configurable:!0,get(){let n=M(e),t=L.ensureMappedState(n.stateMeta);return L.createStateContext(t.path)}}}function qo(e){let t=M(e)?.stateMeta?.name??null;if(l(t)){let r=`__${t}__selector`;Object.defineProperties(e.prototype,{[r]:{writable:!0,enumerable:!1,configurable:!0},state$:{enumerable:!0,configurable:!0,get(){if(l(this[r]))return this[r];if(g(y.store))throw new Error(`Metadata was not created 
 Maybe you forgot to provide NgxsDataPlugin
 Also, you cannot use this.ctx.* until the application is fully rendered 
 (use by default ngxsOnInit(ctx: StateContext), or ngxsAfterBootstrap(ctx: StateContext) !!!`);return this[r]=y.store.select(e).pipe(N(o=>J()?$(o):o),U({refCount:!0,bufferSize:1})),this[r]}}})}}function Jo(e){if(!e)throw new Error(`You forgot to add decorator @StateRepository or initialize state!
Example: provideStore([StateA]), or provideStates([StateB])`);return A(d({},e),{getState(){return J()?$(e.getState()):e.getState()},setState(n){e.setState(n)},patchState(n){e.patchState(n)}})}function we(e){return e?.[ne]}function Qo(e){if(P(e.hasOwnProperty(ne))){let n={name:null,actions:{},defaults:{},path:null,makeRootSelector(t){return t.getStateGetter(n.name)},children:[]};Object.defineProperty(e,ne,{value:n})}return we(e)}var Zt={dataActionSubscribeRequired:!0},Wt=new h("NGXS_DATA_CONFIG",{providedIn:"root",factory:()=>Zt});function ei(...e){let n=[],t=Zt;return e.length>0&&(ti(e[0])?n.push(...e):(t=d(d({},t),e[0]),n.push(...e.slice(1)))),I([L,y,ye,Zn(),...n,{provide:Wt,useValue:t},wn(()=>{a(L),a(y)})])}function ti(e){return!!e.\u0275providers}var Y=new h("NGXS_DATA_STORAGE_CONTAINER_TOKEN");function Ze(e){return e.ttl!==-1&&!isNaN(e.ttl)&&e.ttl>0}function We(e){return g(e)?!0:Date.now()>=e.getTime()}function ir(e){let{data:n,provider:t}=e,r=l(n)||t.nullable,o={canBeOverrideFromStorage:r,versionMismatch:!1,expired:!1,expiry:null};return o=ni(r,o,e),o=ri(r,o,e),o}function ni(e,n,t){let r=n,{meta:o,provider:i}=t;if(e&&Ze(i)){let s=new Date(o.expiry);!isNaN(s.getTime())&&(We(s)?r={canBeOverrideFromStorage:!1,expired:!0,expiry:s,versionMismatch:!1}:r={canBeOverrideFromStorage:e,expired:!1,expiry:s,versionMismatch:!1})}return r}function ri(e,n,t){let r=n,{meta:o,provider:i}=t;if(e&&o.version!==i.version){let s=i.stateInstance;P(i.skipMigrate)&&(D(s?.ngxsDataStorageMigrate)||D(i.migrate))?r=A(d({},n),{versionMismatch:!0}):r=A(d({},n),{canBeOverrideFromStorage:!1,versionMismatch:!0})}return r}function B(e){return e.path??we(e.stateClassRef).path}function K(e){return`${e.prefixKey}${B(e)}`}function qe(e,n){let{provider:t,expiry:r}=n,o={key:e,expiry:r?.toISOString(),timestamp:new Date(Date.now()).toISOString()},i=t.stateInstance;i?.expired$?.next(o),l(i?.ngxsDataAfterExpired)&&(l(y.ngZone)?y.ngZone?.run(()=>i?.ngxsDataAfterExpired?.(o,t)):i?.ngxsDataAfterExpired?.(o,t))}var re=class extends Error{constructor(n){super(`${n}. 
Incorrect structure for deserialization!!! Your structure should be like this: 
${JSON.stringify({lastChanged:"2020-01-01T12:00:00.000Z",data:"{}",version:1},null,4)}`)}};function Je(e){try{return JSON.parse(e)}catch(n){throw new re(n.message)}}function sr(e,n,t){let{provider:r,engine:o}=t,i=Je(n);switch(r.ttlExpiredStrategy){case 0:o.removeItem(e);break;case 1:i.data=null,o.setItem(e,JSON.stringify(i));break;case 2:default:break}}function ar(e,n,t){let{provider:r,expiry:o,map:i,engine:s}=n,u=K(r),c=s.getItem(u);if(l(c)){if(We(o)){let p=new Date(Date.now()).toISOString();sr(u,c,n),qe(u,n),t.unsubscribe(),i.set(r,{subscription:t,startListen:e,endListen:p})}}else t.unsubscribe()}function qt(e){let{provider:n,map:t}=e;t.get(n)?.subscription.unsubscribe();let r=()=>{let o=new Date(Date.now()).toISOString(),i=sn(n.ttlDelay).subscribe(()=>ar(o,e,i));t.set(n,{subscription:i,startListen:o,endListen:null})};l(y.ngZone)?y.ngZone?.runOutsideAngular(()=>r()):r()}var Qe=class extends Error{constructor(){super("missing key 'data' or it's value not serializable.")}};var et=class extends Error{constructor(n){super(`lastChanged key not found in object ${n}.`)}};var tt=class extends Error{constructor(n){super(`It's not possible to determine version (${n}), since it must be a integer type and must equal or more than 1.`)}};function ur(e,n,t){if(X(e)){if(si(e))throw new et(n);if(oi(e))throw new tt(e.version);if(ii(e))throw new Qe;return t.decode==="base64"?JSON.parse(window.atob(e.data)):e.data}throw new re(`"${n}" not an object`)}function oi(e){let n=parseFloat(e.version?.toString()??"");return isNaN(n)||n<1||parseInt(e.version?.toString())!==n}function ii(e){return!("data"in e)}function si(e){return!("lastChanged"in e)||w(e.lastChanged)}function cr(e,n){let t=l(e)?e:null;return n.decode==="base64"?window.btoa(JSON.stringify(t)):t}var nt=class extends Error{constructor(n){super(`Not found storage engine from \`existingEngine\` or not found instance after injecting by \`useClass\`. 
Metadata { key: '${n}' }`)}};var rt=class extends Error{constructor(){super("StorageEngine instance should be implemented by DataStorageEngine interface")}};function ot(e,n){let t=e?.existingEngine??n.get(e?.useClass,null);if(g(t))throw new nt(K(e));if(!("getItem"in t))throw new rt;return t}function lr(e){let n=It(e);return n(de)||n(fe)}function Jt(e){return e.type===te}function dr(e){let n=e.states,{provider:t,data:r,info:o}=e;if(P(t.rehydrate))return{states:n,rehydrateIn:!1};let i=B(t),s=x(n,i);if(D(o.versionMismatch)){let u=t.stateInstance,p=(t.migrate??u.ngxsDataStorageMigrate?.bind(t.stateInstance))?.(s,r);return n=H(n,i,p),{states:n,rehydrateIn:!0}}return JSON.stringify(s)!==JSON.stringify(r)?(n=H(n,i,r),{states:n,rehydrateIn:!0}):{states:n,rehydrateIn:!1}}function fr(e,n,t){console.warn(`Error occurred while deserializing value from metadata { key: '${e}', value: '${n}' }. 
Error deserialize: ${t}`)}function pr(e,n){console.warn(`Error occurred while serializing value from metadata { key: '${e}' }. 
Error serialize: ${n}`)}var m=class m{constructor(){this.platformId=a(yn),m.injector=a(R,{self:!0}),Xt.init(),this.listenWindowEvents()}get store(){return m.injector.get(O,null)}get size(){return this.providers.size}get ttlListeners(){return m.ttlListeners}get container(){return m.injector.get(Y)}get providers(){return this.container.providers}get keys(){return this.container.keys}get entries(){return this.providers.entries()}get skipStorageInterceptions(){return this.size===0||$t(this.platformId)}static checkIsStorageEvent(n,t,r){let{action:o,provider:i,key:s,value:u}=n;if(D(t.rehydrateIn)&&D(Jt(o))){let c=i.stateInstance,p={key:s,value:u,data:r,provider:i};c?.browserStorageEvents$.next(p),D(c?.ngxsDataAfterStorageEvent)&&c?.ngxsDataAfterStorageEvent?.(p)}}static mutateProviderWithInjectStateInstance(n){if(P(n.stateInstance))try{n.stateInstance=m.injector?.get(n.stateClassRef,null)??a(n.stateClassRef)}catch{}}static checkExpiredInit(n){let{info:t,rehydrateInfo:r,options:o,map:i}=n,{provider:s,engine:u}=o;D(r.rehydrateIn)&&D(t.expiry)&&qt({provider:s,expiry:t.expiry,map:i,engine:u})}static canBeSyncStoreWithStorage(n,t){return t||n.type===te}handle(n,t,r){if(this.skipStorageInterceptions)return r(n,t);let o=lr(t);for(let[s]of this.entries)m.mutateProviderWithInjectStateInstance(s);let i=this.pullStateFromStorage(n,{action:t,init:o});return r(i,t).pipe(pn(s=>this.pushStateToStorage(i,s,{action:t,init:o})))}serialize(n,t){let r={version:t.version,lastChanged:new Date().toISOString(),data:cr(n,t)};if(D(Ze(t))){let o=ot(t,m.injector),i=new Date(Date.now()+parseInt(t.ttl));qt({provider:t,expiry:i,map:this.ttlListeners,engine:o}),r.expiry=i.toISOString()}return JSON.stringify(r)}deserialize(n,t,r){return ur(n,t,r)}pushStateToStorage(n,t,r){for(let[o]of this.entries){let i=x(n,B(o)),s=x(t,B(o)),u=D(o.fireInit)&&r.init;if(i!==s||u){let c=ot(o,m.injector),p=K(o);try{let S=this.serialize(s,o);c.setItem(p,S),this.keys.set(p)}catch(S){pr(p,S.message)}}}}pullStateFromStorage(n,{action:t,init:r}){let o=n;if(m.canBeSyncStoreWithStorage(t,r))for(let[i]of this.entries)o=this.deserializeByProvider(o,t,i);return o}deserializeByProvider(n,t,r){let o=n,i=K(r);De(r,"path")||(r.path=B(r));let s=ot(r,m.injector),u=s.getItem(i);return l(u)&&(o=this.deserializeHandler(o,{key:i,engine:s,provider:r,value:u,action:t})),o}deserializeHandler(n,t){let{key:r,provider:o,value:i}=t;try{let s=Je(i),u=this.deserialize(s,i,o),c=ir({provider:o,meta:s,data:u});if(D(c.canBeOverrideFromStorage)){let p=dr({states:n,provider:o,data:u,info:c});this.keys.set(r),n=p.states,m.checkIsStorageEvent(t,p,u),m.checkExpiredInit({info:c,rehydrateInfo:p,options:t,map:this.ttlListeners})}else this.removeKeyWhenPullInvalid(c,t)}catch(s){fr(r,i,s.message)}return n}removeKeyWhenPullInvalid(n,t){let{key:r,engine:o,provider:i}=t;D(n.expired)&&qe(r,{provider:i,engine:o,map:this.ttlListeners,expiry:n.expiry}),o.removeItem(r),this.keys.delete(r)}listenWindowEvents(){$t(this.platformId)||(m.eventsSubscriptions?.unsubscribe(),m.eventsSubscriptions=on(window,"storage").subscribe(n=>{Ue(n.key)&&this.keys.has(n.key)&&this.store.dispatch({type:te}).subscribe()}))}};m.injector=null,m.eventsSubscriptions=null,m.ttlListeners=new WeakMap,m.\u0275fac=function(t){return new(t||m)},m.\u0275prov=f({token:m,factory:m.\u0275fac});var F=m;var Ce=class{constructor(){this.providers=new Set,this.keys=new Map}getProvidedKeys(){return Array.from(this.keys.keys())}};function Qt(){return new Ce}var en={provide:Y,useFactory:Qt};var _e=new h("NGXS_DATA_STORAGE_DECODE_TYPE_TOKEN");var tn={provide:_e,useValue:"none"};var ve=new h("NGXS_DATA_STORAGE_PREFIX_TOKEN");var be="@ngxs.store.",nn={provide:ve,useValue:be};function ai(){return I([Kn(F),en,nn,tn])}function hr(e){let{meta:n,decodeType:t,prefix:r,stateClassRef:o}=e;return[{get path(){return n?.stateMeta?.path},existingEngine:localStorage,ttl:-1,version:1,decode:t,prefixKey:r,nullable:!1,fireInit:!0,rehydrate:!0,ttlDelay:6e4,ttlExpiredStrategy:0,stateClassRef:o,skipMigrate:!1}]}function gr(e,n){let t=n;return"path"in t||(t=A(d({},t),{get path(){return e?.stateMeta?.path}})),t}function mr({option:e,decodeType:n,prefix:t,meta:r,stateClassRef:o}){let i=Object.assign(e,{ttl:l(e.ttl)?e.ttl:-1,version:l(e.version)?e.version:1,decode:l(e.decode)?e.decode:n,prefixKey:l(e.prefixKey)?e.prefixKey:t,nullable:l(e.nullable)?e.nullable:!1,fireInit:l(e.fireInit)?e.fireInit:!0,rehydrate:l(e.rehydrate)?e.rehydrate:!0,ttlDelay:l(e.ttlDelay)?e.ttlDelay:6e4,ttlExpiredStrategy:l(e.ttlExpiredStrategy)?e.ttlExpiredStrategy:0,stateClassRef:l(e.stateClassRef)?e.stateClassRef:o,skipMigrate:l(e.skipMigrate)?e.skipMigrate:!1});return gr(r,i)}function ui(e,n,t){let r,o=F.injector?.get(ve,be)??be,i=F.injector?.get(_e,"none")??"none";return l(t)?r=(Array.isArray(t)?t:[t]).map(u=>mr({option:u,prefix:o,decodeType:i,meta:e,stateClassRef:n})):r=hr({meta:e,prefix:o,decodeType:i,stateClassRef:n}),r}function ci(e){try{let n=F.injector?.get(Y);for(let t of e)n?.providers.add(t)}catch{throw new Error(`You forgot to provide NgxsDataPlugin or NgxsDataStorage!!! Example:

export const appConfig: ApplicationConfig = {
  providers: [
    provideNgxsDataPlugin(withNgxsDataStorage()) 
  ]
}

;`)}}export{je as a,fo as b,Pt as c,Q as d,tr as e,yo as f,So as g,Co as h,_o as i,vo as j,kt as k,Io as l,Ja as m,$t as n,Qa as o,Et as p,z as q,O as r,Vi as s,zi as t,Hi as u,Xi as v,Yi as w,Kn as x,Wt as y,Ro as z,ee as A,g as B,l as C,Oo as D,Gt as E,Lo as F,Bo as G,jo as H,M as I,y as J,L as K,Xt as L,$o as M,or as N,Uo as O,Vo as P,zo as Q,Ho as R,Xo as S,Ye as T,Yo as U,Ko as V,Zo as W,Wo as X,qo as Y,Jo as Z,Qo as _,ei as $,ai as aa,ui as ba,ci as ca};
