import{a as K}from"./chunk-AWEZI4X6.js";import{a as G}from"./chunk-OYNQ5WAV.js";import{a as L}from"./chunk-YFW3QQN3.js";import"./chunk-YS25ZLIA.js";import{c as P}from"./chunk-VP7U7VFG.js";import{a as A}from"./chunk-5W42VNXU.js";import"./chunk-CPBGOJHF.js";import{b as B}from"./chunk-4VS2STHW.js";import"./chunk-RHX3XEC6.js";import"./chunk-QAGGN5Z3.js";import"./chunk-HZPZNH2T.js";import"./chunk-5SMHXN7V.js";import{a as J}from"./chunk-YHPDSTAQ.js";import{r as O}from"./chunk-Z7M3UY5F.js";import{I as j,K as R,N as E,O as V,P as U,V as q,X as F,Y as $}from"./chunk-YPXCCQSY.js";import{$ as k,Ca as x,Kb as I,Lb as y,Mb as S,Nb as d,Ob as i,Pb as o,Qb as p,Ub as w,Zb as v,_b as M,fb as c,i as C,ic as h,ka as u,mc as s,nc as T,ra as g,sa as b,sb as _,vc as N,xa as f,yb as D}from"./chunk-EMWOS5UK.js";function z(e){e||(e=u(f));let t=new C(n=>{if(e.destroyed){n.next();return}return e.onDestroy(n.next.bind(n))});return n=>n.pipe(k(t))}var W=()=>["reverseId"],X=(e,t)=>t.key;function Y(e,t){if(e&1){let n=w();i(0,"ngx-context-menu-item",13),v("onClick",function(l){let r=g(n).$implicit;return M(),h(6).toggleColumnVisibility(r.key),b(l.preventDefault())}),i(1,"ngx-menu-content",14),s(2),o(),i(3,"ngx-menu-content",15),p(4,"mat-checkbox",16),o()()}if(e&2){let n=t.$implicit;d("visible",n.isModel),c(2),T(n.key),c(2),d("checked",n.isVisible)}}function Z(e,t){if(e&1&&p(0,"ngx-column",10),e&2){let n=t.$implicit;d("key",n)}}function ee(e,t){e&1&&(i(0,"button",17)(1,"mat-icon"),s(2,"info"),o()())}var Ne=(()=>{let t=class t{constructor(){this.dialog=u(P),this.tableChanges=u(F),this.destroyRef=u(f),this.data=x([]),this.schema=null,this.testName="test"}ngOnInit(){this.schema=JSON.parse(window.localStorage.getItem(this.testName)??"{}"),A.generator(3,10).then(r=>{this.data.set(r)}),this.tableChanges.events$.pipe(z(this.destroyRef)).subscribe(r=>this.save(r))}ngAfterViewInit(){J()}save(a){console.log("update schema",a),window.localStorage.setItem(this.testName,JSON.stringify(a))}showSample(){this.dialog.open(G,{data:{title:"Overview persistent state table",description:"",language:"typescript",code:`
export class MyComponent implements OnInit {
    protected schema: Nullable<TableUpdateSchema> = null;
    private readonly tableChanges = inject(NgxTableViewChangesService);
    private readonly testName = 'test';
    private readonly destroyRef = inject(DestroyRef);
    
    ngOnInit() {
        this.schema = JSON.parse(
            window.localStorage.getItem(this.testName) ?? '{}',
        ) as TableUpdateSchema;
        
        this.tableChanges.events$
            .pipe(takeUntilDestroyed(this.destroyRef))
            .subscribe((event: TableUpdateSchema) => this.save(event));
    }
    
    private save(event: TableUpdateSchema) {
        window.localStorage.setItem(this.testName, JSON.stringify(event));
    }
}
                `}})}};t.\u0275fac=function(l){return new(l||t)},t.\u0275cmp=_({type:t,selectors:[["sample-sixteen"]],decls:26,vars:8,consts:[["table",""],[1,"simple-toolbar"],["mat-raised-button","","type","button",1,"show-simple",3,"click"],[3,"exclude-keys","name","schema-columns","schema-version","source","vertical-border"],["is-draggable","","is-filterable","","is-sortable",""],["contextTitle","","divider",""],[3,"visible"],["divider","",3,"onClick"],["custom-key","","important-template","","key","id","sticky","","vertical-line","","width","100",3,"is-draggable"],["custom-key","","important-template","","key","reverseId","vertical-line","","width","150"],[3,"key"],["custom-key","","empty-head","","key","edit","sticky-end","","vertical-line","","width","60"],["ngx-td","","row",""],[3,"onClick","visible"],["no-margin",""],["align-center","","no-margin",""],["color","primary",3,"checked"],["mat-button","","type","button"]],template:function(l,r){if(l&1){let m=w();i(0,"mat-toolbar",1)(1,"span"),s(2,"Persistent state (re-order the columns to see the order saved in local storage)"),o(),i(3,"button",2),v("click",function(){return g(m),b(r.showSample())}),s(4," show code sample "),o()(),i(5,"ngx-table-builder",3,0),p(7,"ngx-options",4),i(8,"ngx-context-menu")(9,"ngx-context-menu-item",5)(10,"ngx-menu-content"),s(11,"Menu"),o()(),i(12,"ngx-context-menu-item")(13,"ngx-menu-content"),s(14,"Column list"),o(),y(15,Y,5,3,"ngx-context-menu-item",6,X),o(),i(17,"ngx-context-menu-item",7),v("onClick",function(){g(m);let Q=h(6);return b(Q.resetSchema())}),i(18,"ngx-menu-content"),s(19,"Reset table settings"),o()()(),p(20,"ngx-column",8)(21,"ngx-column",9),y(22,Z,1,1,"ngx-column",10,I),i(24,"ngx-column",11),D(25,ee,3,0,"ng-template",12),o()()}if(l&2){let m=h(6);c(5),d("exclude-keys",N(7,W))("name",r.testName)("schema-columns",r.schema)("schema-version",1)("source",r.data())("vertical-border",!1),c(10),S(m.columnSchema),c(5),d("is-draggable",!1),c(2),S(m.modelColumnKeys)}},dependencies:[B,L,K,O,R,E,V,U,q,$,j],encapsulation:2,changeDetection:0});let e=t;return e})();export{Ne as default};
