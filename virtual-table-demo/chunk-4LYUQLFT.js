import{a as pt}from"./chunk-AWEZI4X6.js";import{b as st}from"./chunk-3DDXGKMF.js";import{c as Q,h as W}from"./chunk-PO3WOB4C.js";import"./chunk-VQYTXSYH.js";import{a as nt,b as ot,c as at,e as rt,f as lt,g as mt}from"./chunk-VP7U7VFG.js";import{a as ct}from"./chunk-5W42VNXU.js";import"./chunk-CPBGOJHF.js";import{b}from"./chunk-4VS2STHW.js";import"./chunk-RHX3XEC6.js";import"./chunk-QAGGN5Z3.js";import{b as R,g as U,h as L,j as Z,l as j,n as K,o as P,p as H,q,r as z}from"./chunk-HZPZNH2T.js";import"./chunk-5SMHXN7V.js";import{r as J}from"./chunk-Z7M3UY5F.js";import{I as X,J as Y,K as tt,L as et,Y as it,j as G}from"./chunk-YPXCCQSY.js";import{$ as D,Ac as O,Bb as F,Bc as B,Ca as M,Ib as I,Jb as E,Kb as V,Lb as x,Mb as C,Nb as d,Ob as n,Pb as r,Qb as A,Ub as k,Zb as u,_b as f,a as g,b as v,fb as c,ic as N,ka as p,l as w,mc as m,nc as T,oc as $,ra as _,sa as h,sb as y,yb as S}from"./chunk-EMWOS5UK.js";var ft=(t,e)=>e.key;function gt(t,e){if(t&1&&(n(0,"mat-form-field")(1,"mat-label"),m(2),r(),A(3,"input",4),r()),t&2){let o=e.$implicit;c(2),T(o.key),c(),d("formControlName",o.key)}}function _t(t,e){if(t&1&&(n(0,"form",1),x(1,gt,4,2,"mat-form-field",null,ft),O(3,"keyvalue"),r()),t&2){let o=f();d("formGroup",o.form),c(),C(B(3,1,o.data))}}var dt=(()=>{let e=class e{constructor(){this.data=p(ot),this.dialogRef=p(nt),this.fb=p(H),this.form=null}ngOnInit(){this.form=this.fb.group(v(g({},this.data),{id:new Z({value:this.data.id,disabled:!0})}))}save(){this.dialogRef.close(this.form?.getRawValue())}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=y({type:e,selectors:[["dialog-template"]],decls:7,vars:1,consts:[["mat-dialog-title",""],[3,"formGroup"],["align","end"],["mat-button","","type","button",1,"dialog-close",3,"click"],["matInput","",3,"formControlName"]],template:function(i,a){i&1&&(n(0,"h2",0),m(1,"Edit"),r(),n(2,"mat-dialog-content"),I(3,_t,4,3,"form",1),r(),n(4,"mat-dialog-actions",2)(5,"button",3),u("click",function(){return a.save()}),m(6," Save "),r()()),i&2&&(c(3),E(a.form?3:-1))},dependencies:[q,j,R,U,L,G,b,mt,lt,rt,W,st,Q,z,K,P],styles:["form[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:1rem}"],changeDetection:0});let t=e;return t})();function ht(t,e){if(t&1&&m(0),t&2){let o=f().$implicit;T(o)}}function yt(t,e){if(t&1&&m(0),t&2){let o=e.$implicit;$(" ",o," ")}}function xt(t,e){if(t&1&&(n(0,"ngx-column",4),S(1,ht,1,1,"ng-template",7)(2,yt,1,1,"ng-template",8),r()),t&2){let o=e.$implicit;d("key",o)}}function Ct(t,e){if(t&1){let o=k();n(0,"button",9),u("click",function(){let i=_(o).$implicit,a=f();return h(a.edit(i))}),n(1,"mat-icon"),m(2,"edit"),r()(),n(3,"button",9),u("click",function(){let i=_(o).$implicit,a=f();return h(a.delete(i))}),n(4,"mat-icon"),m(5,"delete"),r()()}}var zt=(()=>{let e=class e{constructor(){this.dialog=p(at),this.ngZone=p(F),this.destroy$=new w,this.idInterval=null,this.data=M([])}ngOnInit(){this.ngZone.runOutsideAngular(()=>{this.idInterval=window.setInterval(()=>{this.updateTable()},14500)})}ngOnDestroy(){window.clearInterval(this.idInterval??0),this.destroy$.next(),this.destroy$.complete()}add(){this.updateTable()}delete(l){this.data.set(this.data().filter(i=>i!==l))}edit(l){this.ngZone.run(()=>{this.dialog.open(dt,{data:l,width:"1024px"}).afterClosed().pipe(D(this.destroy$)).subscribe(i=>{et(i)&&this.data.set(this.data().map(a=>a?.id===i?.id?g({},i):a))})})}updateTable(){let a=this.data().length>0?Math.max(...this.data().map(s=>s?.id??0)):0;ct.generator(1,10,a).then(s=>{this.data.set(this.data().concat(s))})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=y({type:e,selectors:[["sample-first-second"]],decls:12,vars:1,consts:[["table",""],[1,"simple-toolbar"],["mat-button","","type","button",1,"regenerate",3,"click"],[3,"source"],[3,"key"],["custom-key","","empty-head","","key","action","sticky-end","","width","140"],["ngx-td","","row",""],["ngx-th",""],["ngx-td",""],["mat-button","","type","button",1,"my-action",3,"click"]],template:function(i,a){if(i&1){let s=k();n(0,"div")(1,"mat-toolbar",1)(2,"span"),m(3,"Auto push"),r(),n(4,"button",2),u("click",function(){return _(s),h(a.add())}),m(5," Add "),r()()(),n(6,"ngx-table-builder",3,0),x(8,xt,3,1,"ngx-column",4,V),n(10,"ngx-column",5),S(11,Ct,6,0,"ng-template",6),r()()}if(i&2){let s=N(7);c(6),d("source",a.data()),c(2),C(s.modelColumnKeys)}},dependencies:[b,pt,J,tt,it,X,Y],encapsulation:2,changeDetection:0});let t=e;return t})();export{zt as default};
